VaultState={},function(){var t=null,i=null,o=null,s=null,c=null,l=null,r=null,n=function(e){if(LPTools.getOption(e,"incrementAccountsVersion",!1)){var t=LPTools.getOption(e,"incrementAccountsVersionAmount",1);o+=t}};Topics.get(Topics.INITIALIZED).subscribe(function(){var t="function"==typeof LPPlatform.isSPA&&LPPlatform.isSPA();if(LPPlatform.lpIsExtension()&&!bg.get("g_isie")||t){var e=document.createElement("iframe");e.src="webclient-vault.html",e.id="webclient",$(e).LP_hide(),document.body.appendChild(e),e.addEventListener("load",function(){e.contentWindow.webClient.init(function(e){window.reduxApp=e,p(),t&&top.Topics.get(top.Topics.SPA_IFRAME_WEB_CLIENT_INITIALIZED).publish()})})}else p()}),Topics.get(Topics.IDENTITY_ENABLE).subscribe(function(e){i=e.getID()}),Topics.get(Topics.REQUEST_SUCCESS).subscribe(function(e){n(e.requestSuccessOptions)}),Topics.get(Topics.UPDATE_VAULT_STATE).subscribe(n);var g=function(){if(bg.get("lploggedin")){if(l&&bg.get("g_identity")!==i){i=bg.get("g_identity");for(var e=0,t=l.length;e<t;++e)i===l[e].getID()&&l[e].enable({reprompt:!1})}var n=parseInt(bg.get("g_local_accts_version"));o<n?(o=n,Topics.get(Topics.REFRESH_DATA).publish(),c=null):n<o?(null===c&&(c=(new Date).getTime()),15e3<(new Date).getTime()-c&&(c=null,o=n)):c=null,s!==bg.get("g_showcredmon")&&(s=bg.get("g_showcredmon"),Topics.get(Topics.REFRESH_PREFERENCES).publish())}else Topics.get(Topics.CLEAR_DATA).publish(),clearInterval(r),r=setInterval(function(){a()},1e3)};VaultState.incrementAccountsVersion=function(){++o},VaultState.setAccountsVersion=function(e){o=e},VaultState.setIdentities=function(e){l=e};var u=function(){return bg&&bg.get("lploggedin")&&-1<parseInt(bg.get("g_local_accts_version"))&&LPPlatform.loadedPreferences()},a=function(e){return!!u()&&(t=bg.get("lploggedin"),i=bg.get("g_identity"),o=parseInt(bg.get("g_local_accts_version")),s=bg.get("g_showcredmon"),Topics.get(Topics.LOGIN).publish({fadeIn:void 0===e||e}),clearInterval(r),$("#creditMonitoringMenuItem").show(),!LPProxy.isFreeUser()&&!LPProxy.isExpiredUser()&&-1==navigator.userAgent.indexOf(" Edge/")||bg.get("g_has_credit_monitoring_premium")||$("#creditMonitoringMenuItem").hide(),r=setInterval(function(){g()},1e3),!0)},p=function(){a(!1)||(r=setInterval(function(){a()},1e3))}}();